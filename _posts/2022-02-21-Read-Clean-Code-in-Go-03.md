---
layout: post
title: Go 언어로 읽는 클린 코드 3장 - 함수
categories:
  - books
tags:
  - 노개북
  - 클린 코드
sharing:
  twitter: Go 언어로 읽는 클린 코드 3장 - 함수 #코딩 #개발자 #노마드북클럽 #노개북
---

클린 코드, 애자일 소프트웨어 장인 정신: Day 03 - 함수

> Java 언어를 기반으로 쓰여진 이 책의 내용들을 어떻게 Go 언어에 적용할 수 있을까를 고민하며 읽었습니다.

## 😀 책에서 기억하고 싶은 내용을 써보세요.

"함수는 한 가지를 해야 한다. 그 한 가지를 잘 해야 한다. 그 한 가지만을 해야 한다." (p.44)

"지정된 함수 이름 아래에서 추상화 수준이 하나인 단계만 수행한다면 그 함수는 한 가지 작업만 한다. 어쨌거나 우리가 함수를 만드는 이유는 큰 개념을 (다시 말해, 함수 이름을) 다음 추상화 수준에서 여러 단계로 나눠 수행하기 위해서가 아니던가. (중략) 의미 있는 이름으로 다른 함수를 추출할 수 있다면 그 함수는 여러 작업을 하는 셈이다." (p.45)

"서술적인 이름을 사용하면 개발자 머릿속에서도 설계가 뚜렷해지므로 코드를 개선하기 쉬워진다. 좋은 이름을 고른 후 코드를 더 좋게 재구성하는 사례도 없지 않다." (p.49-50)

"플래그 인수는 추하다. 함수로 부울(bool) 값을 넘기는 관례는 정말로 끔찍하다. 왜냐고? 함수가 한꺼번에 여러 가지를 처리한다고 대놓고 공표하는 셈이니까! 플래 그가 참이면 이걸 하고 거짓이면 저걸 한다는 말이니까!" (p.52)

"인수가 2-3개 필요하다면 일부를 독자적인 클래스 변수로 선언할 가능성을 짚어 본다." (p.53)

"함수는 뭔가를 수행하거나 뭔가에 답하거나 둘 중 하나만 해야 한다. 둘 다 하면 안 된다." (p.56)

"어쩌면 중복은 소프트웨어에서 모든 악의 근원이다. 많은 원칙과 기법이 중복을 없애거나 제어할 목적으로 나왔다." (p.60)

"처음부터 탁 짜내지 않는다. 그게 가능한 사람은 없으리라." (p.62)

## 🤔 오늘 읽은 소감은? 떠오르는 생각을 가볍게 적어보세요.

이 챕터에서 가장 크게 다가온 부분은 함수를 어떻게 짜야 한다는 것보다 내가 짠 코드를 글을 계속해서 수정하듯이 고치고 또 고쳐야 한다는 부분이었다. 학교에서 과제를 하거나 취업 준비를 위해 인터뷰를 준비하다 보니 코드를 빨리 작동하게 짜는 것이 잘 하는 것이다라는 잘못된 생각이 내 안에 자리 잡은 것 같다. 회사에서 일할 때에도 왜 이 코드를 짜는데 이렇게 오래 걸리지라고 생각을 할 때가 종종 있었는데 사실 알고 보면 나만 그냥 엉터리로 코드를 작동하게만 짜놓고 있었던 게 아닐까 싶다. 우물 안 개구리가 따로 없다. 윗 내용들 중 머리로는 모르는 건 없었던 것 같다. 단지 빨리 퇴근하고 싶으니깐 기능을 다 만족하고 테스트를 통과하니깐 그냥 넘어가자라고 생각했던 내 자신의 모습을 반성한다. 

처음에 구현할 때부터 완벽하고 깔끔한 코드를 작성할 수 없다고 인정하자. 내 새끼 같은 코드지만 내 새끼니깐 계속 지우고 고쳐나가자. 그래야 나중에 진짜로 내 새끼라고 인정하고 자랑할 수 있는 코드가 될 테니깐. 누가 이렇게 짰는지 보려고 `git blame` 했는데 내 이름이 나오는 것보다 이게 훨씬 낫다. 부지런하자.

정말로 중복된 코드들이 나쁘기만 할까? 애자일 방식이 정착되면서 요구사항들은 개발을 하는 중간에도 변화가 되는 경우가 많다. 이전 요구사항대로 추상화된 코드에서 새로운 요구사항들을 쉽게 바꿀 수 있을까? 우리는 정말 모든 요구사항에 확장이 쉬운 추상화가 가능할까? 아니면 섣부른 추상화가 오히려 코드가 너무 복잡해지는 라자냐 코드를 만들어내지 않을까? 모든 것을 다 추상화하려다가 생긴 잘못된 추상화는 코드의 중복보다 더 나쁘다고 생각한다. 추상화를 아예 하지 않는 것은 문제가 될 수 있지만 너무 우상화할 필요는 없다고 생각한다.

## 👀 소감 3줄 요약

- 코드를 짜는 것이 아니라 어떤 기능들이 필요한지 최대한 짧은 문장으로 써보고 그 문장을 함수 이름으로 만든 다음에 그 기능을 구현해보면 어떨까? 그러면 서술적인 이름도 가질 수 있고 어떤 기능을 구현할 지 명확하니깐 하나의 기능만 하는 함수들로 이루어진 코드를 짤 수 있게 되지 않을까?
- 개발자는 부지런해야 한다. 
- 너무 많은 코드때문에 생기는 스파게티 코드도 무섭지만 너무 많은 추상화로 생기는 라자냐 코드도 무섭다. 

## Go 언어에서는?

오늘 내용에서 여러 차이가 있겠지만 내가 생각하는 Java와 가장 다른 부분은 `try/catch`와 `Exception`이 없다는 점과 중복에 대한 부분이다.

### Exception이 없다?!

`try/catch`를 사용하는 대신 Go에서 함수를 작성할 때는 `error`를 핸들해야 하는 경우 `error`를 결과값과 함께 리턴해야 한다. 이는 Go 언어가 지향하는 단순한 문법때문도 있지만 실제로 개발자들이 필요할 때만 `try/catch`를 활용하는 것이 아니라 모든 함수에서 `error`를 미리 계획하고 그것을 어떻게 핸들해야할 지를 생각하면서 코드를 작성하게 만든다.

### 코드의 중복

`Generic`이 1.18 버전에 들어오기는 하지만 실제로 사용하기까지는 시간이 좀 걸릴 것으로 생각이 된다. 그리고 없었다보니 지금까지의 Go 코드들은 `Generic`이 없어서 발생하는 중복들을 어느 정도 눈감아주기도 했다. 실제로 코드의 의존성을 늘리는 것보다 단순한 로직의 경우에는 코드를 복사/붙여넣기 해서 가져오는 것을 더 선호하는 Go 개발자들도 있다. 그리고 `Generic` 없이 코딩하던 것들이 모여 `Go`만이 가지고 있는 새로운 코딩 관습들을 만들었다고 생각한다. 지금의 패러다임이 많은 사람들이 원했던 `Generic`이 실제로 생기게 되면서 어떻게 바뀔 지 기대가 된다.