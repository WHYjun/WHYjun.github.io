---
layout: post
title: Go 언어로 읽는 클린 코드 5장 - 형식 맞추기
categories:
  - books
tags:
  - 노개북
  - 클린 코드
sharing:
  twitter: Go 언어로 읽는 클린 코드 5장 - 형식 맞추기 #코딩 #개발자 #노마드북클럽 #노개북
---

클린 코드, 애자일 소프트웨어 장인 정신: Day 05 - 형식

> Java 언어를 기반으로 쓰여진 이 책의 내용들을 어떻게 Go 언어에 적용할 수 있을까를 고민하며 읽었습니다.

## 😀 책에서 기억하고 싶은 내용을 써보세요.

"프로그래머라면 형식을 깔끔하게 맞춰 코드를 짜야 한다. 코드 형식을 맞추기 위한 간단한 규칙을 정하고 그 규칙을 착실히 따라야 한다. 팀으로 일한다면 팀이 합의해 규칙을 정하고 모두가 그 규칙을 따라야 한다. 필요하다면 규칙을 자동으로 적용하는 도구를 활용한다." (p.96)

"코드 형식은 의사소통의 일환이다. 의사소통은 전문 개발자의 일차적인 의무다." (p.96)

"소스 파일 첫 부분은 고차원 개념과 알고리즘을 설명한다. 아래로 내려갈수록 의도를 세세하게 묘사한다. 마지막에는 가장 저차원 함수와 세부 내역이 나온다." (p.98)

"생각 사이는 빈 행을 넣어 분리해야 마땅하다." (p.98)

"서로 밀접한 코드 행은 세로로 가까이 놓여야 한다는 뜻이다. (중략) 연관성이란 한 개념을 이해하는데 다른 개념이 중요한 정도다. 연관성이 깊은 두 개념이 멀리 떨어져 있으면 코드를 읽는 사람이 소스 파일과 클래스를 여기저기 뒤지게 된다." (p.100)

"변수는 사용하는 위치에 최대한 가까이 선언한다. 우리가 만든 함수는 매우 짧으므로 지역 변수는 각 함수 맨 처음에 선언한다." (p.101)

"잘 알려진 위치에 인스턴스 변수를 모은다는 사실이 중요하다. 변수 선언을 어디서 찾을지 모두가 알고 있어야 한다." (p.103)

"한 함수가 다른 함수를 호출한다면 두 함수는 세로로 가까이 배치한다. 또한 가능하다면 호출하는 함수를 호출되는 함수보다 먼저 배치한다. 그러면 프로그램이 자연스럽게 읽힌다. 규칙을 일관적으로 적용한다면 독자는 방금 호출한 함수가 잠시 후에 정의되리라는 사실을 예측한다." (p.104)

"상수를 알아야 마땅한 함수에서 실제로 사용하는 함수로 상수를 넘겨주는 방법이 더 좋다." (p.105)

"어떤 코드는 서로 끌어당긴다. 개념적인 친화도가 높기 때문이다. 친화도가 높을수록 코드를 가까이 배치한다." (p.106)

"범위(scope)로 이뤄진 계층을 표현하기 위해 우리는 코드를 들여쓴다. 들여쓰는 정도는 계층에서 코드가 자리잡은 수준에 비례한다." (p.111)

"때로는 간단한 if 문, 짧은 while 문, 짧은 함수에서 들여쓰기 규칙을 무시하고픈 유혹이 생긴다. 이런 유혹에 빠질 때마다 나는 항상 원점으로 돌아가 들여쓰기를 넣는다." (p.112)

"하지만 팀에 속한다면 자신 이 선호해야 할 규칙은 바로 팀 규칙 이다. 팀은 한 가지 규칙에 합의해야 한다. 그리고 모든 팀원은 그 규칙을 따라야 한다. 그래야 소프트웨어가 일관적인 스타일을 보인다. 개개인이 따로국밥처럼 맘대로 짜대는 코드는 피해야 한다." (p.113)

## 🤔 오늘 읽은 소감은? 떠오르는 생각을 가볍게 적어보세요.

오늘 챕터에서는 정해진 형식을 통해 코드를 얼마나 쉽고 빠르게 읽을 수 있는지 알게 되었다. 이전 챕터들에서도 나왔듯이 우리는 대부분의 개발 시간을 코드를 읽고 이해하는데 사용한다. 그렇기 때문에 저자도 코드를 쉽게 읽고 쉽게 찾을 수 있는지에 대해서 이 책은 많은 부분을 할애했다. 지금까지 우리는 의미 있는 이름과 함수 챕터에서 파편적인 코드를 어떻게 하면 쉽게 찾을 수 있게 의미를 부여하고 추상화하는 방법에 대해 배웠다면, 이번 챕터에서는 하나의 정해진 형식을 팀이 사용하면서 처음 보는 파일일지라도 그 정해진 형식에 따라 쉽게 필요한 정보를 가져오고 이해할 수 있게 되는지를 설명하고 있다. 처음 보는 파일에 아무리 의미가 명확한 변수와 함수들이 있다고 해도 이름을 알지 못하기 때문에 찾지 못하기 때문에 형식을 따르는 것은 매우 중요하다. 특히 이전 챕터까지 나온 책의 내용을 잘 따랐다면, 변수와 함수의 수가 늘었을 텐데 이것들이 여러 파일에 쪼개져서 숨겨져 있다면 결국 이 파일, 저 파일 열어봐야하기 때문에 좋은 코드라고 볼 수 없다. 어떤 형식이 무조건 옳고 좋다고는 할 수 없지만 팀에서 정해진 형식이 있다면 나와 생각이 다르더라도 최대한 따라야 하고 만약 그 형식들이 내 생산성을 침해한다면 내가 선호하는 대로 우선 코드를 작성하고 자동으로 적용하는 도구를 사용해서 정해진 형식을 맞출 수 있도록 해야 한다.

나아가 그 형식들을 그냥 맹목적으로 따르는 것보다 그렇게 정해진 이유들을 찾아봐야 한다. 예를 들면, Go 언어로 코드를 작성할 때는 상수라고 할 지라도 대문자로 이름을 짓지 않는다. 이는 각 변수와 함수의 이름이 대문자로 시작할 경우 외부에서 사용할 수 있기 때문이다. 이러한 규칙들은 그 언어의 특징을 설명해주고 만약 팀에서 이러한 규칙을 지키지 않는다면 팀 차원에서 이 규칙에 대해 토의해보고 고쳐야 할 것이다.

## 👀 소감 3줄 요약

- 형식을 자동으로 맞춰주는 툴(lint, prettier, editorconfig)들을 활용하자.
- 두괄식으로 코드를 작성하자. 이 파일을 열어볼 미래의 개발자들이 가장 궁금해할 내용이 무엇일지 생각해보면 어느 것이 상단에 위치해야 하는지 정하기 쉬울 것이다.
- 각 언어마다 따라야 하는 형식들이 있다. 그렇게 정해진 이유가 분명 있을 것이다. 그 이유들을 찾아보고 알게 된다면 그 언어를 이해하는데 더 도움이 되지 않을까?

## gofmt

[Effective Go: Formatting](https://go.dev/doc/effective_go#formatting)

다양한 스타일의 `eslint`가 있는 Javascript와 달리, Go는 언어를 설치할 때 형식을 자동화하는 툴이 같이 설치한다. 이는 대부분의 형식을 개발자들 대신 자동으로 맞춰주고 팀의 형식을 정하기 위해 시간을 낭비하지 않도록 도와준다. 형식을 정하는게 얼마나 큰 대수냐라고 할 수 있지만, `tab`과 `space`를 가지고는 많은 개발자들의 논쟁이 있었고 Python에서는 들여쓰기가 둘 중 하나로 통일되지 않으면 파일이 실행되지 않기도 한다. 